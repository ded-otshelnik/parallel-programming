# Задание 5. OpenMP и управление общими ресурсами и модель выполнения задач

## Модель выполнения задач и директива tasks

## Задания

### Требования

+ Варианты 1-5 подразумевают наличие некоторой тестовой программы, которая показывает возможности кода.
+ Варианты 6-10 подразумевают наличие параллельной и последовательной реализации и измерение времени части кода, которая параллелится.
+ Обязательно разделение программы на несколько файлов .c и один или несколько заголовочных файлов .h.
+ Для проверки корректности работы запустить тестовую программу, например, 4, 8 и 16 потоках, причем количество потоков не должно быть программно установлено.
+ При реализации предпочтительно использовать динамическое управление памятью и указатели.

### Варианты

1. Пусть есть структура данных ***двунаправленная очередь (deque)***, размер которой ограничен числом *N*. Реализовать потокобезопасную двунаправленную очередь с соответствующими функциями (add / addLast, remove / removeFirst, peek / peekFirst, etc.).
2. Пусть есть структура данных ***очередь с приоритетами (priority_queue)*** такая, что элементы в ней упорядочены **натуральным образом** (по факту, задан некоторый способ упорядочения структуры данных). Реализовать потокобезопасную очередь с приоритетами с cоответствующими функциями (add, remove, peek, etc.).
3. Пусть есть структура данных ***стек (stack)***. Реализовать потокобезопасный стек с соответствующими функциями (push, pop, peek, etc.).
4. Пусть есть структура данных ***хеш-таблица (hash_map)***. Реализовать потокобезопасную хеш-таблицу с соответствующими функциями (put, get, remove, etc.).
5. Пусть есть *$N_{acc}$* банковских аккаунтов (*$N_{threads}$* $\leq$ *$N_{acc}$*) вида:

   ```c
   struct bank_account{
        char* fullname;
        float balance;
   }
   ```

   В некоторый рандомный момент времени *$t_n$* поток берет и переводит какую-то сумму с банковского аккаунта на случайный другой. Реализовать программу, эмулирующую работу банка со следующими условиями:
   1. Программа не должна допускать взаимной блокировки потоков.
   2. Информация о переводах с одного аккаунта на другой должна быть выведены на stdout.
   3. Общая сумма денег на всех аккаунтах не должна изменяться со временем и должна выводится с некоторой регулярностью.
   4. Баланс на банковском аккаунте не должен быть отрицательным.
   5. Длительность перерыва между переводами сделать рандомным, но относительно небольшим.
   6. Время работы ограничить 1 минутой.

6. Реализовать параллельную программу, которая решает судоку для сетки N x N (9x9 или 16x16).
7. Дан текстовый файл. Реализовать параллельную программу ```caesar```, которая шифрует текст и записывает его в новый файл по следующему правилу: каждая буква в тексте смещается циклически на *n* позиций в алфавите (если *n*=3, то 'a' -> 'd', 'b' -> 'e', и т.д.) с таким же регистром. Предусмотреть возможность дешифровки полученного текста.
8. Реализовать параллельную программу ```grep```, которая получает из командной строки список паттернов (для простоты, слов или последовательности букв) и файл для проверки и выводит вхождения в формате *"Line <номер строки>: <строка>"* и количество вхождений каждого паттерна в текст.
9. Даны *N* (*$N_{threads}$* $\leq$ *$N$*) текстовых файла. Реализовать программу ```cat```, которая конкатенирует содержимое файлов и выводит на экран или в другой файл.
10. Дана задача Коши вида $\frac{dy}{dx} = f(x, y), y(x_0) = y_0$. Написать программу, решающую задачу Коши для ОДУ методом Рунге-Кутта 4 порядка, результат записать в файл.
